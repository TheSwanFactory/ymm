# - install
# - test
# - watch
# - release
# - dev
install:
    - pip3 install -r requirements.txt
build:
    - pip3 install --upgrade pytest
    - pip3 install --upgrade pytest-watch
    - pip3 install --upgrade build
    - pip3 install --upgrade twine

test:
    - python3 -m pytest

test-install:
    - $install
    - ymm -v
    - ymm -d echo

echo:
    - echo Test Successful
    - date
    - echo {^}
    - $watch

watch:
    - echo Use `ptw`

release:
    - prerelease --no-input
    - release --no-input
    - python3 -m build
    - python3 -m twine upload dist/*
    - postrelease --no-input

version:
    - cat version.txt
    - awk -Fv {{printf("%sv%d\n",$1,$2+1)}} version.txt
    - sed -i .new s/{^}/{^^}/ version.txt
    - cat version.txt

dev:
    - cat version.txt
    - awk -Fv {{printf("%sv%d\n",$1,$2+1)}} version.txt
    - sed -i .new s/{^}/{^^}/ version.txt
    - cat version.txt
    - git commit -am {^}
    - git push
